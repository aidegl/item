# 陪诊小程序原型需求说明书

## 1. 项目背景与目标
**目标用户**：职业陪诊师（重点赋能缺乏医学背景或经验不足的新手陪诊师）。
**核心痛点**：
1.  **信息采集难**：患者病情描述杂乱，陪诊师难以抓住重点。
2.  **记录负担重**：就诊过程中医嘱多、单据多，手动记录易遗漏。
3.  **报告生成慢**：诊后整理报告耗时耗力，专业度参差不齐。
**设计目标**：打造一款"流程化、智能化、自动化"的陪诊辅助工具，通过 AI 技术（ASR、OCR、LLM）减少 80% 的手动录入工作，确保服务标准化。

---

## 2. 核心功能模块设计

### 2.1 模块一：诊前准备与智能采集系统
**功能定位**：辅助陪诊师完成标准化诊前沟通。

#### 2.1.1 电话信息采集模块
*   **交互流程**：
    1.  陪诊师在小程序点击"开始诊前沟通"。
    2.  系统调起电话功能，并同步开启**通话录音**。
    3.  屏幕显示**《诊前问卷》话术提词器**（基于 `诊前问卷.md`）。
    4.  通话结束，系统自动上传录音文件。

#### 2.1.2 智能转写与填充（LLM Integration）
*   **功能描述**：
    1.  **语音转文字 (ASR)**：将通话录音转换为文本。
    2.  **AI 结构化提取**：调用大模型分析文本，提取关键医疗信息。
    3.  **自动填充**：将提取的信息自动填入**《就诊需求书》**（对应 `就诊需求书.md`）。
*   **字段映射逻辑**：
    *   `诊前问卷` "目前最明显的症状" -> 自动填入 `就诊需求书` "核心症状详情 - 1.症状名称"
    *   `诊前问卷` "症状起始时间" -> 自动填入 `就诊需求书` "核心症状详情 - 2.起病时间"
    *   `诊前问卷` "本次就诊最想弄清楚的问题" -> 自动填入 `就诊需求书` "四、患者核心疑问"

---

### 2.2 模块二：就诊管理与数据联动机制
**功能定位**：实现一次录入，多处复用，减少重复工作。

#### 2.2.1 基础信息自动化 (Data Linkage)
*   **机制**：建立患者档案数据库。
*   **自动导入**：当创建新的就诊订单时，系统自动从数据库拉取以下信息同步至 `就诊需求书` 和后续的 `总结报告`：
    *   患者姓名、性别、年龄
    *   联系方式
    *   药物过敏史（重要安全提示，需高亮显示）

#### 2.2.2 就诊类型定义
*   **功能**：在"就诊记录"中增加"新增记录"入口。
*   **操作**：陪诊师选择本次服务类型：`□首诊` 或 `□复诊`。
*   **联动**：选择结果自动勾选 `就诊需求书` 头部 "就诊类型" 字段。

---

### 2.3 模块三：诊后总结报告自动化生成
**功能定位**：基于过程数据，一键生成专业交付物（基于 `陪诊后患者诊疗总结报告.md`）。

#### 2.3.1 第一部分：诊前回顾（自动引用）
*   **数据来源**：直接引用已确认的 `就诊需求书` 数据。
*   **字段映射**：
    *   `就诊需求书` "核心诉求" -> `总结报告` "一、诊前核心信息回顾 - 1.就诊核心诉求"
    *   `就诊需求书` "核心症状详情" -> `总结报告` "一、诊前核心信息回顾 - 2.核心症状摘要"

#### 2.3.2 第二部分：诊中诊疗详情（OCR 识别）
**场景**：陪诊师在医院拿到检查单和病历本。

*   **功能 A：检查报告 OCR**
    *   **操作**：拍照扫描"检查/检验报告单"。
    *   **处理**：OCR 提取"项目名称"和"异常结果"（如：↑ ↓ 标识）。
    *   **填充**：自动填入 `总结报告` "二、诊中诊疗详情 - (一)检查项目与结果"。

*   **功能 B：门诊病历 OCR（核心功能）**
    *   **参考样本**：`门诊病历.md`
    *   **识别重点**：
        1.  **初步诊断**（如：冠状动脉供血不足） -> 填入 `总结报告` "最终诊断结果"。
        2.  **处理/医嘱**（如：口服药物、清淡饮食） -> 填入 `总结报告` "医生治疗建议"。
    *   **示例逻辑**：
        *   识别到文本 "处理: 1.建议静养... 2.清淡饮食..."
        *   自动解析为列表形式填入报告的"生活方式调整"栏。

#### 2.3.3 第三部分：其他信息补充
*   **功能**：提供语音备忘录和手动输入框。
*   **场景**：记录医生口头嘱咐但未写在病历上的细节（如"下周二下午医生停诊，记得周三再来"）。

---

## 3. 用户体验 (UX) 与界面设计

### 3.1 新手引导系统 (Onboarding)
*   **流程指引**：在任务列表中按顺序展示"诊前沟通" -> "到院签到" -> "陪诊记录" -> "报告生成"，引导新手按步骤操作。
*   **上下文帮助 (Contextual Help)**：
    *   在《就诊需求书》页面，针对"诱发因素"字段提供 Tooltip 提示："询问患者什么情况下症状会加重，如熬夜、吃冷饮等"。
    *   在 OCR 扫描页，提供"拍摄示范"（如：请确保病历字体清晰，不要反光）。

### 3.2 界面交互优化
*   **极简录入**：能选不填，能拍不写。大量使用单选/多选标签（如症状描述提供常见标签：头痛、发热、恶心）。
*   **数据校验**：
    *   必填项（如"下次复诊时间"）未填时，禁止生成报告并红色高亮提示。
    *   OCR 识别后提供"原文比对校正"弹窗，允许人工快速修改识别错误。

---

## 4. 附件：关联文档清单
本原型设计严格依据以下文档标准执行：
1.  **诊前话术标准**：`d:\Item\shenxianzi\.trae\Doc\参考资料\诊前问卷.md`
2.  **诊前交付物标准**：`d:\Item\shenxianzi\.trae\Doc\参考资料\就诊需求书.md`
3.  **OCR 识别样本**：`d:\Item\shenxianzi\.trae\Doc\参考资料\门诊病历.md`
4.  **最终交付物标准**：`d:\Item\shenxianzi\.trae\Doc\参考资料\陪诊后患者诊疗总结报告.md`

## 5. 开发环境与工具
*   **前端框架**：HTML5 + CSS3 + JavaScript（响应式设计）
*   **后端服务**：展示不需要，先梳理原型流程，数据处理由前端完成
*   **OCR 识别**：后期调通，先模拟，优先跑通逻辑和流程