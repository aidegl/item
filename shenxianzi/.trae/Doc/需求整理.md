# 文档集：Monorepo项目结构设计文档
## 一、需求背景
基于微信小程序+Webview双端开发场景，为避免代码冗余、实现两端关联开发，采用Monorepo结构统一管理项目，TRAE需同时生成两端代码。

## 二、模块划分设计
| 模块名称       | 路径        | 技术栈                  | 核心功能                          | 设计目的                          |
|----------------|-------------|-------------------------|-----------------------------------|-----------------------------------|
| 微信小程序模块 | /wxApp      | 微信原生小程序（JS+WXML）| 包含webview容器页，承载Webview加载 | 隔离小程序原生代码，适配微信生态  |
| Webview模块    | /webview    | Vue3                    | 适配微信webview环境，对接明道云接口 | 隔离H5代码，适配webview渲染特性   |
| 共享模块       | /shared     | 通用JS/TS               | 共用API封装、签名函数、类型定义    | 避免重复代码，降低维护成本        |

## 三、关联逻辑设计
1. 加载逻辑：小程序webview容器页（pages/webview/index）加载Webview模块打包后的dist/index.html，需提前配置小程序业务域名（指向Webview部署的宝塔域名）；
2. 通信逻辑：采用window.wx调用小程序原生API（如login/connectSocket），采用postMessage传递业务数据（如openid/订单号），具体规则参考TRAE项目规则v1.2的2.2章节。

## 四、协作说明
1. 新增功能时，优先判断是否可放入shared模块复用；
2. 调试时，小程序端需指向Webview的开发环境地址（localhost:8080），上线时切换为宝塔部署的生产地址。